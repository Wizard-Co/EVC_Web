<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}" lang="ko">

<head>
    <!-- 필요시 스타일 시트와 JS 파일을 이곳에 추가합니다 -->
    <link href="/baseMgmt/article/customArticle.css" rel="stylesheet" type="text/css">
    <script src="/baseMgmt/article/customArticle.js"></script>
    <!-- 예시: DataTables CSS 추가 (필요한 경우) -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css">
</head>

<body>
<input type="hidden" id="sessionPersonID" th:value="${session.personID}">
<section layout:fragment="content">
    <!-- 로딩 표시 -->
    <div id="loading" class="invisible"></div>

    <main>
        <div class="menu">
            <div class="page-header">
                ■ 거래처별 관리품목 등록
            </div>
            <div class="icon">
                <div class="flx">
                    <button type="button" class="btn btn-info m-r-05" id="btnSearch">조회</button>
                    <button type="button" class="btn btn-success m-r-05" id="btnUpdate">수정</button>
                    <button type="button" class="btn btn-success" id="btnDelete">삭제</button>
                    <button type="button" class="btn btn-success m-r-05" id="btnColes">닫기</button>
                </div>
                <div class="flx mt-05">
                    <button type="button" class="btn btn-success m-r-05" id="btnAdd">추가</button>
                    <button type="button" class="btn btn-success m-r-05" id="btnSave">저장</button>
                    <button type="button" class="btn btn-success m-r-05" id="btnCancel">취소</button>
                    <button type="button" id="btnExcel" class="btn btn-print m-r-05">엑셀</button>
                </div>
            </div>
        </div>
        <div class="panel">
            <div class="panel-body">
                <div class="flx">
                    <!-- 거래처 검색 -->
                    <div class="div-srh m-r-4">
                        <label for="KCustom" class="lbl-srh">거래처</label>
                        <input type="text" id="KCustom" class="form-control" placeholder="거래처검색">
                    </div>
                </div>
                <!-- 거래처 구분 콤보박스 -->
                <div class="flx">
                    <div class="div-srh m-r-4">
                        <label for="BusinessTypeCode" class="lbl-srh">거래처구분</label>
                        <select id="BusinessTypeCode">
                            <option value="">선택</option>
                            <option value="전체">전체</option>
                            <option value="대기">대기</option>
                            <option value="완료">완료</option>
                        </select>
                    </div>
                </div>
                <div class="flx">
                    <div class="div-srh m-r-4">
                        <div colspan="1">
                            <input type="text" id="article" name="article" class="form-control subtle-input"
                                   placeholder="품명검색"
                                   onkeyup="if(event.key === 'Enter')PlusFinder('articleID', 'article', 8, this.value)">
                            <input type="hidden" id="articleID" name="articleID">
                            <!-- 품명 조회 버튼 -->
                            <button type="button" onclick="PlusFinder('articleID', 'article', 8, this.value)">
                                <!--                                <img src="../../img/search6.png" class="search-icon">-->
                            </button>
                        </div>
                        <!-- 품명 조회 결과 표시 영역 -->
                        <div colspan="1">
                            <div id="articleResults" style="display:none;">
                                <h3>품명 조회 결과</h3>
                                <ul id="articleList">
                                    <!-- Thymeleaf에서 동적으로 품명 목록을 렌더링 -->
                                    <li th:each="article : ${articles}" th:text="${article}"></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="toggleButton" class="toggle-button">관리품 보기</button>
            </div>
        </div>
        <section>
            <table id="KCustomTable" class="striped cell-border table-light-info">
                <caption class="table-section-title">거래처</caption>
                <thead>
                <tr>
                    <th>순</th>
                    <th>거래처명</th>
                    <th>비고</th>
                    <th>품번</th>
                    <th>품명</th>
                </tr>
                </thead>
                <tbody>
                <!-- 데이터가 로딩되면 여기에 추가됩니다 -->
                </tbody>
                <tfoot>
                <tr>
                    <td colspan="2" class="tfoot-value">
                        건수: <span id="resultCount">0</span>
                    </td>
                </tr>
                </tfoot>
            </table>
        </section>
        <section style="display: flex; justify-content: space-between;">
            <table id="KCustomTable1" class="striped cell-border table-light-info">
                <caption class="table-section-title">전체품목</caption> <!-- 테이블 제목 -->
                <thead>
                <tr>
                    <th>순</th>
                    <th>품번</th>
                    <th>품명</th>
                </tr>
                </thead>
                <tbody>
                <!-- 데이터가 로딩되면 여기에 추가됩니다 -->
                </tbody>
                <tfoot>
                <tr>
                    <td colspan="2" class="tfoot-value">
                        건수: <span id="articleCountValue">0</span>
                    </td>
                </tr>
                </tfoot>
            </table>
            <div class="arrows">
                <button id="rightArrow">→</button>
                <button id="leftArrow">←</button>
            </div>
            <table id="KCustomTable2" class="striped cell-border table-light-info">
                <caption class="small-caption">
                    <div class="caption-wrapper">
                        <span class="caption-title">거래처구분:</span>
                        <span class="caption-value" id="businessTypeCaptionValue">데이터값</span>
                    </div>
                </caption>
                <caption class="table-section-title">선택된품목</caption>
                <thead>
                <tr>
                    <th>순</th>
                    <th>품번</th>
                    <th>품명</th>
                    <th>투자단가</th>
                    <th>단가</th>
                    <th>영업수수료</th>
                </tr>
                </thead>
                <tbody>
                <!-- 데이터가 로딩되면 여기에 추가됩니다 -->
                </tbody>
                <tfoot>
                <tr>
                    <td colspan="2" class="tfoot-value">
                        건수: <span id="selectCount">0</span>
                    </td>
                </tr>
                </tfoot>
            </table>
        </section>
    </main>
</section>
<div id="deleteConfirmationModal">
    <div class="modal-content">
        <p>정말로 삭제하시겠습니까?</p>
        <button class="deleteConfirmBtn">삭제 확인</button>
        <button class="cancel-btn">취소</button>
    </div>
</div>

<div id="saveModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 20px; background-color: white; border: 1px solid #ccc; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); z-index: 1000;">
    <p>저장이 완료되었습니다!</p>
    <button id="closeModalBtn">닫기</button>
</div>
<!-- 배경 어둡게 -->
<div id="modalBackdrop" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 999;"></div>


<!-- Script 파일 로딩 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
</body>
</html>
